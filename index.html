<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EthOS Tap Game - Final</title>
  <style>
    body {
      margin: 0;
      background: #000;
      overflow: hidden;
      color: #0ff;
      font-family: 'Courier New', monospace;
      -webkit-tap-highlight-color: transparent; /* hapus highlight di mobile */
    }

    #hud {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 1.2em;
      z-index: 10;
      display: none;
      user-select: none;
    }

    .logo {
      position: absolute;
      width: 80px;
      height: 80px;
      background-image: url('https://raw.githubusercontent.com/ethos-vision/ethos-assets/main/ethos-logo.png'); /* ganti sesuai logo asli */
      background-size: 60%;
      background-repeat: no-repeat;
      background-position: center;
      cursor: pointer;
      animation: fall linear;
      border-radius: 50%;
      background-color: rgba(0, 255, 255, 0.05);
      touch-action: manipulation; /* responsif di touch */
    }

    @keyframes fall {
      0% { transform: translateY(-100px); opacity: 1; }
      100% { transform: translateY(110vh); opacity: 0; }
    }

    #game-over {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #0ff;
      font-size: 2em;
      display: none;
      text-align: center;
      font-family: 'Courier New', monospace;
      border: 1px solid #0ff;
      padding: 30px 40px;
      background-color: rgba(0, 255, 255, 0.05);
      backdrop-filter: blur(6px);
      border-radius: 12px;
      user-select: none;
    }

    #start-screen {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      font-size: 1.5em;
      padding: 20px;
      border: 1px solid #0ff;
      background-color: rgba(0, 255, 255, 0.05);
      border-radius: 12px;
      backdrop-filter: blur(6px);
      user-select: none;
    }

    input, button {
      font-family: inherit;
      font-size: 1em;
      padding: 6px 12px;
      margin-top: 10px;
      background: transparent;
      border: 1px solid #0ff;
      color: #0ff;
      border-radius: 6px;
    }
    input::placeholder {
      color: #088;
    }
  </style>
</head>
<body>

<div id="start-screen">
  Welcome to <strong>EthOS Drop</strong><br><br>
  Enter your username:<br>
  <input id="username-input" placeholder="e.g. cryptocat" autocomplete="off" /><br>
  <button onclick="startGame()">Start</button>
</div>

<div id="hud">
  Player: <span id="player-name"></span><br>
  Score: <span id="score">0</span><br>
  Time: <span id="time">60</span>s
</div>

<div id="game-over">
  ‚è∞ <strong>Game Over</strong><br><br>
  <span id="final-username"></span><br>
  Final Score: <span id="final-score"></span><br><br>
  <button onclick="restartGame()">Play Again</button>
</div>

<audio id="click-sound" src="https://freesound.org/data/previews/475/475977_10224471-lq.mp3"></audio>

<script>
  let score = 0;
  let timeLeft = 60;
  let gameRunning = false;
  let spawnInterval;
  let countdownInterval;
  let username = '';

  const hud = document.getElementById('hud');
  const scoreEl = document.getElementById('score');
  const timeEl = document.getElementById('time');
  const gameOverEl = document.getElementById('game-over');
  const finalScoreEl = document.getElementById('final-score');
  const finalUsernameEl = document.getElementById('final-username');
  const playerNameEl = document.getElementById('player-name');
  const startScreen = document.getElementById('start-screen');
  const clickSound = document.getElementById('click-sound');

  function spawnLogo() {
    if (!gameRunning) return;

    const logo = document.createElement('div');
    logo.classList.add('logo');
    const duration = Math.random() * 4 + 4; // jatuh 4-8 detik
    logo.style.left = Math.random() * (window.innerWidth - 80) + 'px';
    logo.style.animationDuration = duration + 's';

    // Support click & tap mobile
    logo.onclick = logo.ontouchstart = function (e) {
      e.preventDefault(); // mencegah trigger ganda / scroll
      if (!gameRunning) return;
      score++;
      scoreEl.textContent = score;
      clickSound.currentTime = 0;
      clickSound.play();
      logo.remove();
    };

    logo.addEventListener('animationend', () => logo.remove());

    document.body.appendChild(logo);
  }

  function startGame() {
    const input = document.getElementById('username-input');
    username = input.value.trim() || "Anonymous";
    playerNameEl.textContent = username;
    startScreen.style.display = "none";
    hud.style.display = "block";
    gameOverEl.style.display = "none";

    score = 0;
    timeLeft = 60;
    scoreEl.textContent = score;
    timeEl.textContent = timeLeft;

    gameRunning = true;

    spawnInterval = setInterval(spawnLogo, 1000);

    countdownInterval = setInterval(() => {
      timeLeft--;
      timeEl.textContent = timeLeft;
      if (timeLeft <= 0) {
        endGame();
      }
    }, 1000);
  }

  function endGame() {
    gameRunning = false;
    clearInterval(spawnInterval);
    clearInterval(countdownInterval);

    finalScoreEl.textContent = score;
    finalUsernameEl.textContent = `Player: ${username}`;
    gameOverEl.style.display = 'block';
    hud.style.display = 'none';

    // Hapus semua logo yang masih muncul
    document.querySelectorAll('.logo').forEach(el => el.remove());
  }

  function restartGame() {
    startScreen.style.display = "block";
    gameOverEl.style.display = "none";
  }
</script>

</body>
</html>
